plugins {
	id 'java-platform'
}

javaPlatform {
	allowDependencies()
}

ext {
	assertjVersion = '3.22.0'
	awaitilityVersion = '4.2.0'
	googleJsr305Version = '3.0.2'
	hamcrestVersion = '2.2'
	hibernateValidationVersion = '7.0.4.Final'
	jacksonBomVersion = '2.13.3'
	jaywayJsonPathVersion = '2.6.0'
	junitJupiterVersion = '5.8.2'
	pulsarVersion = '2.10.0'
	log4jVersion = '2.17.2'
	mockitoVersion = '4.5.1'
	reactorVersion = '2020.0.17'
	pulsarTestcontainersVersion = '1.17.2'
	springBootVersion = '3.0.0-SNAPSHOT'
	springRetryVersion = '1.3.3'
	springVersion = '6.0.0-SNAPSHOT'
	caffeineVersion = '3.1.1'
}

dependencies {
	api platform("org.springframework:spring-framework-bom:$springVersion")
	api platform("io.projectreactor:reactor-bom:$reactorVersion")
	api platform("org.junit:junit-bom:$junitJupiterVersion")
	api platform("com.fasterxml.jackson:jackson-bom:$jacksonBomVersion")
	api platform("org.apache.logging.log4j:log4j-bom:$log4jVersion")

	constraints {
		// spring-pulsar
		api "com.github.ben-manes.caffeine:caffeine:$caffeineVersion"
		api "org.apache.pulsar:pulsar-client:$pulsarVersion"
		api "org.apache.pulsar:pulsar-client-admin:$pulsarVersion"
		api "org.apache.pulsar:pulsar-client-admin-api:$pulsarVersion"
		api "org.springframework.retry:spring-retry:$springRetryVersion"
		api "com.jayway.jsonpath:json-path:$jaywayJsonPathVersion"
		api "org.mockito:mockito-junit-jupiter:$mockitoVersion"
		api "org.hibernate.validator:hibernate-validator:$hibernateValidationVersion"
		// spring-pulsar-spring-boot-autoconfigure
		api "org.springframework.boot:spring-boot-autoconfigure-processor:$springBootVersion"
		api "org.springframework.boot:spring-boot-configuration-processor:$springBootVersion"
		api "org.springframework.boot:spring-boot:$springBootVersion"
		api "org.springframework.boot:spring-boot-autoconfigure:$springBootVersion"
		api "org.springframework.boot:spring-boot-starter:$springBootVersion"
		api "org.springframework.boot:spring-boot-starter-validation:$springBootVersion"
		api "org.springframework.boot:spring-boot-starter-test:$springBootVersion"
		// Common to all
		api "com.google.code.findbugs:jsr305:$googleJsr305Version"
		api 'org.apiguardian:apiguardian-api:1.0.0'
		api "org.awaitility:awaitility:$awaitilityVersion"
		api "org.hamcrest:hamcrest-core:$hamcrestVersion"
		api "org.assertj:assertj-core:$assertjVersion"
		api "org.testcontainers:pulsar:$pulsarTestcontainersVersion"
	}
}
